<h1>Posts</h1>

<p><%= link_to "Novo Post", new_post_path %></p>

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px;">
  <% @posts.each do |post| %>
    <div style="border: 1px solid #ddd; border-radius: 12px; padding: 12px;">
      <% if post.image.attached? %>
        <%= image_tag post.image.variant(resize_to_limit: [800, 800]) %>
      <% else %>
        <div style="height: 200px; background:#f3f3f3; display:flex; align-items:center; justify-content:center;">
          Sem foto
        </div>
      <% end %>
      <div style="margin-top: 8px; white-space: pre-wrap;"><%= post.caption %></div>

      <div style="margin-top: 8px; display:flex; gap:8px;">
        <%= link_to "Mostrar", post %>
        <%= link_to "Editar", edit_post_path(post) %>
        <%= link_to "Apagar", post, data: { turbo_method: :delete, turbo_confirm: "Tem certeza?" } %>
      </div>
    </div>
  <% end %>
</div>
